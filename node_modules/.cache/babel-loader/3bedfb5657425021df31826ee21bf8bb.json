{"ast":null,"code":"var _jsxFileName = \"/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/src/myProfile.js\",\n    _s2 = $RefreshSig$();\n\nconst cohort = \"2208-ftb-et-web-ft\";\nconst strangerThings = \"https://strangers-things.herokuapp.com/api\";\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MyProfile = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const deletePost = id => {\n    console.log(\"hello\", id);\n    fetch(`${strangerThings}/${cohort}/posts/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(response => response.json()).then(result => {\n      console.log(result);\n    }).catch(console.error);\n  };\n\n  const [myResult, setmyResult] = useState({});\n\n  const test = async () => {\n    fetch(`${strangerThings}/${cohort}/users/me`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(response => response.json()).then(result => {\n      // console.log('RESULT',result);\n      // TODO array.filter only keep active: true\n      // const checkTrue = () => {\n      //     const onlyTrue = result.data.posts.active.filter(true);\n      //     return onlyTrue;\n      //   };\n      //  const onlyTrueResult = result.data.posts.active.filter(checkTrue)\n      const result2 = result.data.posts.filter(post => post.active === true);\n      const finalResult = {\n        success: result.success,\n        username: result.data.username,\n        posts: result2\n      };\n      console.log(finalResult);\n      setmyResult(finalResult); // console.log(\"0RESULT\", result);\n      // console.log(\"1RESULT\", result.data);\n      // console.log(\"2RESULT\", result.data.posts);\n    }).catch(console.error);\n  };\n\n  const onLoad = () => {\n    _s();\n\n    useEffect(() => {\n      test();\n    }, [test]);\n  };\n\n  _s(onLoad, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n  onLoad();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [myResult.success ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [myResult.username, \"!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 27\n    }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Loading ...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 59\n    }, this), myResult.success ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: myResult.posts.map((me, i) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [\"Title: \", me.title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [\"Description: \", me.description]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [\"Price: \", me.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => deletePost(me._id),\n              children: \"Delete Post\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 19\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Loading ...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(MyProfile, \"m49ZxQJb8xPzALCaPR/phdb9c28=\");\n\n_c = MyProfile;\nexport default MyProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyProfile\");","map":{"version":3,"names":["cohort","strangerThings","useEffect","useState","MyProfile","deletePost","id","console","log","fetch","method","headers","Authorization","localStorage","getItem","then","response","json","result","catch","error","myResult","setmyResult","test","result2","data","posts","filter","post","active","finalResult","success","username","onLoad","map","me","i","title","description","price","_id"],"sources":["/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/src/myProfile.js"],"sourcesContent":["const cohort = \"2208-ftb-et-web-ft\";\nconst strangerThings = \"https://strangers-things.herokuapp.com/api\";\nimport { useEffect, useState } from \"react\";\n\nconst MyProfile = () => {\n  const deletePost = (id) => {\n    console.log(\"hello\", id);\n    fetch(`${strangerThings}/${cohort}/posts/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n    })\n      .then((response) => response.json())\n      .then((result) => {\n        console.log(result);\n      })\n      .catch(console.error);\n  };\n\n  const [myResult, setmyResult] = useState({});\n\n  const test = async () => {\n    fetch(`${strangerThings}/${cohort}/users/me`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n    })\n      .then((response) => response.json())\n      .then((result) => {\n        // console.log('RESULT',result);\n        // TODO array.filter only keep active: true\n        // const checkTrue = () => {\n        //     const onlyTrue = result.data.posts.active.filter(true);\n        //     return onlyTrue;\n        //   };\n        //  const onlyTrueResult = result.data.posts.active.filter(checkTrue)\n\n        const result2 = result.data.posts.filter(\n          (post) => post.active === true\n        );\n\n        const finalResult = {\n          success: result.success,\n          username: result.data.username,\n          posts: result2,\n        };\n        console.log(finalResult);\n\n        setmyResult(finalResult);\n        // console.log(\"0RESULT\", result);\n        // console.log(\"1RESULT\", result.data);\n        // console.log(\"2RESULT\", result.data.posts);\n      })\n      .catch(console.error);\n  };\n\n  const onLoad = () => {\n    useEffect(() => {\n      test();\n    }, [test]);\n  };\n  onLoad();\n\n  return (\n    <div>\n      {myResult.success ? <h1>{myResult.username}!</h1> : <h3>Loading ...</h3>}\n      {myResult.success ? (\n        <h1>\n          {myResult.posts.map((me, i) => {\n            return (\n              <div>\n                <div className=\"card\" key={i}>\n                  <h2>Title: {me.title}</h2>\n                  <h2>Description: {me.description}</h2>\n                  <h2>Price: {me.price}</h2>\n                  <button type=\"button\" onClick={() => deletePost(me._id)}>\n                    Delete Post\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </h1>\n      ) : (\n        <h3>Loading ...</h3>\n      )}\n    </div>\n  );\n};\n\nexport default MyProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}