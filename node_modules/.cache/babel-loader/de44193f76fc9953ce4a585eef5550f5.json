{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useState}from\"react\";import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var cohort=\"2208-ftb-et-web-ft\";var strangerThings=\"https://strangers-things.herokuapp.com/api\";var LoginUserSubmit=function LoginUserSubmit(){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),LoginName=_useState2[0],setLoginName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),LoginPassword=_useState4[0],setLoginPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),loginNow=_useState6[0],setLoginNow=_useState6[1];var loginSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var response,data,token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();console.log(\"LoginSubmit\");_context.next=4;return fetch(\"\".concat(strangerThings,\"/\").concat(cohort,\"/users/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{username:LoginName,password:LoginPassword}})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;console.log(\"loginData\",data);loginNow=setLoginNow(data.success);if(!(data.success===true)){_context.next=16;break;}_context.next=13;return data.data.token;case 13:token=_context.sent;localStorage.setItem(\"token\",token);navigate(\"/dashboard\");case 16:case\"end\":return _context.stop();}}},_callee);}));return function loginSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"nav\",{className:\"nav\",children:/*#__PURE__*/_jsx(Link,{className:\"navBarLink\",to:\"/register\",children:\"Register Now\"})})}),/*#__PURE__*/_jsx(\"h1\",{class:\"login\",children:\"LOGIN\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:loginSubmit,children:[\"Name:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:LoginName,onChange:function onChange(event){setLoginName(event.target.value);// console.log(event.target.value);\n}}),\"Password:\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:LoginPassword,onChange:function onChange(event){setLoginPassword(event.target.value);// console.log(event.target.value);\n}}),/*#__PURE__*/_jsx(\"button\",{type:\"text\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"h4\",{children:loginNow}),loginNow===true?/*#__PURE__*/_jsx(\"h3\",{children:\"Welcome Back\"}):loginNow===false?/*#__PURE__*/_jsx(\"h3\",{children:\"Please Register now\"}):\"\"]})]});};export default LoginUserSubmit;","map":{"version":3,"names":["React","useState","Link","useNavigate","cohort","strangerThings","LoginUserSubmit","navigate","LoginName","setLoginName","LoginPassword","setLoginPassword","loginNow","setLoginNow","loginSubmit","event","preventDefault","console","log","fetch","method","headers","body","JSON","stringify","user","username","password","response","json","data","success","token","localStorage","setItem","target","value"],"sources":["/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/src/LogInUser.js"],"sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst cohort = \"2208-ftb-et-web-ft\";\nconst strangerThings = \"https://strangers-things.herokuapp.com/api\";\n\nconst LoginUserSubmit = () => {\n  const navigate = useNavigate();\n\n  const [LoginName, setLoginName] = useState(\"\");\n  const [LoginPassword, setLoginPassword] = useState(\"\");\n  let [loginNow, setLoginNow] = useState(\"\");\n\n  const loginSubmit = async (event) => {\n    event.preventDefault();\n    console.log(\"LoginSubmit\");\n    const response = await fetch(`${strangerThings}/${cohort}/users/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          username: LoginName,\n          password: LoginPassword,\n        },\n      }),\n    });\n    const data = await response.json();\n    console.log(\"loginData\", data);\n\n    loginNow = setLoginNow(data.success);\n\n    if (data.success === true) {\n      let token = await data.data.token;\n      localStorage.setItem(\"token\", token);\n      navigate(\"/dashboard\");\n    }\n  };\n  return (\n    <div>\n      <div>\n        <nav className=\"nav\">\n          {/* <Link className=\"navBarLink\" to=\"/allposts\">ShowAllPosts</Link> */}\n          <Link className=\"navBarLink\" to=\"/register\">\n            Register Now\n          </Link>\n          {/* <Link className=\"navBarLink\" to=\"/home\">Home</Link> */}\n        </nav>\n      </div>\n      {/* Login Submit Form */}\n      <h1 class=\"login\">LOGIN</h1>\n      <form onSubmit={loginSubmit}>\n        Name:\n        <input\n          type=\"text\"\n          value={LoginName}\n          onChange={(event) => {\n            setLoginName(event.target.value);\n            // console.log(event.target.value);\n          }}\n        ></input>\n        Password:\n        <input\n          type=\"password\"\n          value={LoginPassword}\n          onChange={(event) => {\n            setLoginPassword(event.target.value);\n            // console.log(event.target.value);\n          }}\n        ></input>\n        <button type=\"text\">Log In</button>\n        <h4>{loginNow}</h4>\n        {loginNow === true ? (\n          <h3>Welcome Back</h3>\n        ) : loginNow === false ? (\n          <h3>Please Register now</h3>\n        ) : (\n          \"\"\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default LoginUserSubmit;\n"],"mappings":"4cAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAEA,GAAMC,OAAM,CAAG,oBAAf,CACA,GAAMC,eAAc,CAAG,4CAAvB,CAEA,GAAMC,gBAAe,CAAG,QAAlBA,gBAAkB,EAAM,CAC5B,GAAMC,SAAQ,CAAGJ,WAAW,EAA5B,CAEA,cAAkCF,QAAQ,CAAC,EAAD,CAA1C,wCAAOO,SAAP,eAAkBC,YAAlB,eACA,eAA0CR,QAAQ,CAAC,EAAD,CAAlD,yCAAOS,aAAP,eAAsBC,gBAAtB,eACA,eAA8BV,QAAQ,CAAC,EAAD,CAAtC,yCAAKW,QAAL,eAAeC,WAAf,eAEA,GAAMC,YAAW,4FAAG,iBAAOC,KAAP,4IAClBA,KAAK,CAACC,cAAN,GACAC,OAAO,CAACC,GAAR,CAAY,aAAZ,EAFkB,sBAGKC,MAAK,WAAId,cAAJ,aAAsBD,MAAtB,iBAA4C,CACtEgB,MAAM,CAAE,MAD8D,CAEtEC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF6D,CAKtEC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,IAAI,CAAE,CACJC,QAAQ,CAAElB,SADN,CAEJmB,QAAQ,CAAEjB,aAFN,CADa,CAAf,CALgE,CAA5C,CAHV,QAGZkB,QAHY,qCAeCA,SAAQ,CAACC,IAAT,EAfD,QAeZC,IAfY,eAgBlBb,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyBY,IAAzB,EAEAlB,QAAQ,CAAGC,WAAW,CAACiB,IAAI,CAACC,OAAN,CAAtB,CAlBkB,KAoBdD,IAAI,CAACC,OAAL,GAAiB,IApBH,kDAqBED,KAAI,CAACA,IAAL,CAAUE,KArBZ,SAqBZA,KArBY,eAsBhBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,KAA9B,EACAzB,QAAQ,CAAC,YAAD,CAAR,CAvBgB,uDAAH,kBAAXO,YAAW,4CAAjB,CA0BA,mBACE,oCACE,kCACE,YAAK,SAAS,CAAC,KAAf,uBAEE,KAAC,IAAD,EAAM,SAAS,CAAC,YAAhB,CAA6B,EAAE,CAAC,WAAhC,0BAFF,EADF,EADF,cAWE,WAAI,KAAK,CAAC,OAAV,mBAXF,cAYE,cAAM,QAAQ,CAAEA,WAAhB,gCAEE,cACE,IAAI,CAAC,MADP,CAEE,KAAK,CAAEN,SAFT,CAGE,QAAQ,CAAE,kBAACO,KAAD,CAAW,CACnBN,YAAY,CAACM,KAAK,CAACoB,MAAN,CAAaC,KAAd,CAAZ,CACA;AACD,CANH,EAFF,0BAWE,cACE,IAAI,CAAC,UADP,CAEE,KAAK,CAAE1B,aAFT,CAGE,QAAQ,CAAE,kBAACK,KAAD,CAAW,CACnBJ,gBAAgB,CAACI,KAAK,CAACoB,MAAN,CAAaC,KAAd,CAAhB,CACA;AACD,CANH,EAXF,cAmBE,eAAQ,IAAI,CAAC,MAAb,oBAnBF,cAoBE,oBAAKxB,QAAL,EApBF,CAqBGA,QAAQ,GAAK,IAAb,cACC,oCADD,CAEGA,QAAQ,GAAK,KAAb,cACF,2CADE,CAGF,EA1BJ,GAZF,GADF,CA4CD,CA7ED,CA+EA,cAAeN,gBAAf"},"metadata":{},"sourceType":"module"}