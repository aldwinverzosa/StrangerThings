{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var cohort=\"2208-ftb-et-web-ft\";var strangerThings=\"https://strangers-things.herokuapp.com/api\";import{useEffect,useState}from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var MyProfile=function MyProfile(){var deletePost=function deletePost(id){console.log(\"hello\",id);fetch(\"\".concat(strangerThings,\"/\").concat(cohort,\"/posts/\").concat(id),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(response){return response.json();}).then(function(result){console.log(result);}).catch(console.error);};var _useState=useState({}),_useState2=_slicedToArray(_useState,2),myResult=_useState2[0],setmyResult=_useState2[1];var test=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fetch(\"\".concat(strangerThings,\"/\").concat(cohort,\"/users/me\"),{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(response){return response.json();}).then(function(result){// console.log('RESULT',result);\n// TODO array.filter only keep active: true\n// const checkTrue = () => {\n//     const onlyTrue = result.data.posts.active.filter(true);\n//     return onlyTrue;\n//   };\n//  const onlyTrueResult = result.data.posts.active.filter(checkTrue)\nvar result2=result.data.posts.filter(function(post){return post.active===true;});var finalResult={success:result.success,username:result.data.username,posts:result2};console.log(finalResult);setmyResult(finalResult);// console.log(\"0RESULT\", result);\n// console.log(\"1RESULT\", result.data);\n// console.log(\"2RESULT\", result.data.posts);\n}).catch(console.error);case 1:case\"end\":return _context.stop();}}},_callee);}));return function test(){return _ref.apply(this,arguments);};}();var onLoad=function onLoad(){useEffect(function(){test();},[test]);};onLoad();return/*#__PURE__*/_jsxs(\"div\",{children:[myResult.success?/*#__PURE__*/_jsxs(\"h1\",{children:[myResult.username,\"!\"]}):/*#__PURE__*/_jsx(\"h3\",{children:\"Loading ...\"}),myResult.success?/*#__PURE__*/_jsx(\"h1\",{children:myResult.posts.map(function(me,i){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Title: \",me.title]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Description: \",me.description]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Price: \",me.price]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return deletePost(me._id);},children:\"Delete Post\"})]},i)});})}):/*#__PURE__*/_jsx(\"h3\",{children:\"Loading ...\"})]});};export default MyProfile;","map":{"version":3,"names":["cohort","strangerThings","useEffect","useState","MyProfile","deletePost","id","console","log","fetch","method","headers","Authorization","localStorage","getItem","then","response","json","result","catch","error","myResult","setmyResult","test","result2","data","posts","filter","post","active","finalResult","success","username","onLoad","map","me","i","title","description","price","_id"],"sources":["/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/src/myProfile.js"],"sourcesContent":["const cohort = \"2208-ftb-et-web-ft\";\nconst strangerThings = \"https://strangers-things.herokuapp.com/api\";\nimport { useEffect, useState } from \"react\";\n\nconst MyProfile = () => {\n  const deletePost = (id) => {\n    console.log(\"hello\", id);\n    fetch(`${strangerThings}/${cohort}/posts/${id}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n    })\n      .then((response) => response.json())\n      .then((result) => {\n        console.log(result);\n      })\n      .catch(console.error);\n  };\n\n  const [myResult, setmyResult] = useState({});\n\n  const test = async () => {\n    fetch(`${strangerThings}/${cohort}/users/me`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n    })\n      .then((response) => response.json())\n      .then((result) => {\n        // console.log('RESULT',result);\n        // TODO array.filter only keep active: true\n        // const checkTrue = () => {\n        //     const onlyTrue = result.data.posts.active.filter(true);\n        //     return onlyTrue;\n        //   };\n        //  const onlyTrueResult = result.data.posts.active.filter(checkTrue)\n\n        const result2 = result.data.posts.filter(\n          (post) => post.active === true\n        );\n\n        const finalResult = {\n          success: result.success,\n          username: result.data.username,\n          posts: result2,\n        };\n        console.log(finalResult);\n\n        setmyResult(finalResult);\n        // console.log(\"0RESULT\", result);\n        // console.log(\"1RESULT\", result.data);\n        // console.log(\"2RESULT\", result.data.posts);\n      })\n      .catch(console.error);\n  };\n\n  const onLoad = () => {\n    useEffect(() => {\n      test();\n    }, [test]);\n  };\n  onLoad();\n\n  return (\n    <div>\n      {myResult.success ? <h1>{myResult.username}!</h1> : <h3>Loading ...</h3>}\n      {myResult.success ? (\n        <h1>\n          {myResult.posts.map((me, i) => {\n            return (\n              <div>\n                <div className=\"card\" key={i}>\n                  <h2>Title: {me.title}</h2>\n                  <h2>Description: {me.description}</h2>\n                  <h2>Price: {me.price}</h2>\n                  <button type=\"button\" onClick={() => deletePost(me._id)}>\n                    Delete Post\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </h1>\n      ) : (\n        <h3>Loading ...</h3>\n      )}\n    </div>\n  );\n};\n\nexport default MyProfile;\n"],"mappings":"4cAAA,GAAMA,OAAM,CAAG,oBAAf,CACA,GAAMC,eAAc,CAAG,4CAAvB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtB,GAAMC,WAAU,CAAG,QAAbA,WAAa,CAACC,EAAD,CAAQ,CACzBC,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAqBF,EAArB,EACAG,KAAK,WAAIR,cAAJ,aAAsBD,MAAtB,mBAAsCM,EAAtC,EAA4C,CAC/CI,MAAM,CAAE,QADuC,CAE/CC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,kBAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CAFN,CAFsC,CAA5C,CAAL,CAOGC,IAPH,CAOQ,SAACC,QAAD,QAAcA,SAAQ,CAACC,IAAT,EAAd,EAPR,EAQGF,IARH,CAQQ,SAACG,MAAD,CAAY,CAChBX,OAAO,CAACC,GAAR,CAAYU,MAAZ,EACD,CAVH,EAWGC,KAXH,CAWSZ,OAAO,CAACa,KAXjB,EAYD,CAdD,CAgBA,cAAgCjB,QAAQ,CAAC,EAAD,CAAxC,wCAAOkB,QAAP,eAAiBC,WAAjB,eAEA,GAAMC,KAAI,4FAAG,qIACXd,KAAK,WAAIR,cAAJ,aAAsBD,MAAtB,cAAyC,CAC5CW,OAAO,CAAE,CACP,eAAgB,kBADT,CAEPC,aAAa,kBAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CAFN,CADmC,CAAzC,CAAL,CAMGC,IANH,CAMQ,SAACC,QAAD,QAAcA,SAAQ,CAACC,IAAT,EAAd,EANR,EAOGF,IAPH,CAOQ,SAACG,MAAD,CAAY,CAChB;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAMM,QAAO,CAAGN,MAAM,CAACO,IAAP,CAAYC,KAAZ,CAAkBC,MAAlB,CACd,SAACC,IAAD,QAAUA,KAAI,CAACC,MAAL,GAAgB,IAA1B,EADc,CAAhB,CAIA,GAAMC,YAAW,CAAG,CAClBC,OAAO,CAAEb,MAAM,CAACa,OADE,CAElBC,QAAQ,CAAEd,MAAM,CAACO,IAAP,CAAYO,QAFJ,CAGlBN,KAAK,CAAEF,OAHW,CAApB,CAKAjB,OAAO,CAACC,GAAR,CAAYsB,WAAZ,EAEAR,WAAW,CAACQ,WAAD,CAAX,CACA;AACA;AACA;AACD,CA/BH,EAgCGX,KAhCH,CAgCSZ,OAAO,CAACa,KAhCjB,EADW,sDAAH,kBAAJG,KAAI,0CAAV,CAoCA,GAAMU,OAAM,CAAG,QAATA,OAAS,EAAM,CACnB/B,SAAS,CAAC,UAAM,CACdqB,IAAI,GACL,CAFQ,CAEN,CAACA,IAAD,CAFM,CAAT,CAGD,CAJD,CAKAU,MAAM,GAEN,mBACE,uBACGZ,QAAQ,CAACU,OAAT,cAAmB,sBAAKV,QAAQ,CAACW,QAAd,OAAnB,cAAmD,mCADtD,CAEGX,QAAQ,CAACU,OAAT,cACC,oBACGV,QAAQ,CAACK,KAAT,CAAeQ,GAAf,CAAmB,SAACC,EAAD,CAAKC,CAAL,CAAW,CAC7B,mBACE,kCACE,aAAK,SAAS,CAAC,MAAf,wBACE,gCAAYD,EAAE,CAACE,KAAf,GADF,cAEE,sCAAkBF,EAAE,CAACG,WAArB,GAFF,cAGE,gCAAYH,EAAE,CAACI,KAAf,GAHF,cAIE,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAE,yBAAMlC,WAAU,CAAC8B,EAAE,CAACK,GAAJ,CAAhB,EAA/B,yBAJF,GAA2BJ,CAA3B,CADF,EADF,CAYD,CAbA,CADH,EADD,cAkBC,mCApBJ,GADF,CAyBD,CAvFD,CAyFA,cAAehC,UAAf"},"metadata":{},"sourceType":"module"}