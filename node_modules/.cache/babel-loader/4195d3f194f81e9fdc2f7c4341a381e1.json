{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//main file\nimport{useEffect,useState}from\"react\";import{createRoot}from\"react-dom/client\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var cohort=\"2208-ftb-et-web-ft\";var strangerThings=\"https://strangers-things.herokuapp.com/api\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allPosts=_useState2[0],setAllPosts=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newUser=_useState4[0],setNewUser=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newPassword=_useState6[0],setNewPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),LoginName=_useState8[0],setLoginName=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),LoginPassword=_useState10[0],setLoginPassword=_useState10[1];//cant use API if no useEffect?\nuseEffect(function(){var getAllData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getAllPosts();case 2:case\"end\":return _context.stop();}}},_callee);}));return function getAllData(){return _ref.apply(this,arguments);};}();getAllData();},[]);var getAllPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(strangerThings,\"/\").concat(cohort,\"/posts\"));case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;setAllPosts(data.data.posts);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function getAllPosts(){return _ref2.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(event){var response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.preventDefault();console.log(\"NAME AND PASSWORD\",newUser,newPassword);// console.log(\"registerUser\");\n_context3.next=4;return fetch(\"\".concat(strangerThings,\"/\").concat(cohort,\"/users/register\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{username:newUser,password:newPassword}})});case 4:response=_context3.sent;_context3.next=7;return response.json();case 7:data=_context3.sent;console.log(\"data\",data);console.log(\"data2\",data.data.token);setNewUser(\"\");setNewPassword(\"\");case 12:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();var loginSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event){var response,data,token;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:event.preventDefault();console.log(\"LoginSubmit\");_context4.next=4;return fetch(\"\".concat(strangerThings,\"/\").concat(cohort,\"/users/login\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{username:LoginName,password:LoginPassword}})});case 4:response=_context4.sent;_context4.next=7;return response.json();case 7:data=_context4.sent;console.log(\"loginData\",data);_context4.next=11;return data.data.token;case 11:token=_context4.sent;localStorage.setItem(\"token\",JSON.stringify(token));case 13:case\"end\":return _context4.stop();}}},_callee4);}));return function loginSubmit(_x2){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Home  \"}),/*#__PURE__*/_jsx(\"span\",{children:\" CreatePost  \"}),/*#__PURE__*/_jsx(\"span\",{children:\"  AllPosts\"})]})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Hello from Stranger Things\"}),/*#__PURE__*/_jsx(\"div\",{})]});};var container=document.getElementById(\"app\");var root=createRoot(container);root.render(/*#__PURE__*/_jsx(App,{}));","map":{"version":3,"names":["useEffect","useState","createRoot","cohort","strangerThings","App","allPosts","setAllPosts","newUser","setNewUser","newPassword","setNewPassword","LoginName","setLoginName","LoginPassword","setLoginPassword","getAllData","getAllPosts","fetch","response","json","data","posts","handleSubmit","event","preventDefault","console","log","method","headers","body","JSON","stringify","user","username","password","token","loginSubmit","localStorage","setItem","container","document","getElementById","root","render"],"sources":["/Users/aldwin/Desktop/fullstackAcademy/Projects/StrangerThings/src/index.js"],"sourcesContent":["//main file\n\nimport { useEffect, useState } from \"react\";\nimport { createRoot } from \"react-dom/client\";\nconst cohort = \"2208-ftb-et-web-ft\";\nconst strangerThings = \"https://strangers-things.herokuapp.com/api\";\n\nconst App = () => {\n  const [allPosts, setAllPosts] = useState([]);\n  const [newUser, setNewUser] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  const [LoginName, setLoginName] = useState(\"\");\n  const [LoginPassword, setLoginPassword] = useState(\"\");\n\n  //cant use API if no useEffect?\n  useEffect(() => {\n    const getAllData = async () => {\n      await getAllPosts();\n    };\n    getAllData();\n  }, []);\n\n  const getAllPosts = async () => {\n    const response = await fetch(`${strangerThings}/${cohort}/posts`);\n    const data = await response.json();\n    setAllPosts(data.data.posts);\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    console.log(\"NAME AND PASSWORD\", newUser, newPassword);\n    // console.log(\"registerUser\");\n    const response = await fetch(`${strangerThings}/${cohort}/users/register`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          username: newUser,\n          password: newPassword,\n        },\n      }),\n    });\n    const data = await response.json();\n    console.log(\"data\", data);\n    console.log(\"data2\", data.data.token);\n\n    setNewUser(\"\");\n    setNewPassword(\"\");\n  };\n\n  const loginSubmit = async (event) => {\n    event.preventDefault();\n    console.log(\"LoginSubmit\");\n    const response = await fetch(`${strangerThings}/${cohort}/users/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        user: {\n          username: LoginName,\n          password: LoginPassword,\n        },\n      }),\n    });\n    const data = await response.json();\n    console.log(\"loginData\", data);\n    let token = await data.data.token;\n\n    localStorage.setItem(\"token\", JSON.stringify(token));\n  };\n\n  return (\n    <div>\n      <div>\n        <nav>\n          <span>Home  </span>\n          <span> CreatePost  </span>\n          <span>  AllPosts</span>\n        </nav>\n      </div>\n      <h1>Hello from Stranger Things</h1>\n      <div></div>\n    </div>\n  );\n};\n\nconst container = document.getElementById(\"app\");\nconst root = createRoot(container);\nroot.render(<App />);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}